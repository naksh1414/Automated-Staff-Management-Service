{"level":"error","message":"Error occurred: No authorization header","name":"CustomError","service":"ErrorMiddleware","stack":"CustomError: No authorization header\n    at /home/nakshatramanglik/Bus-Staff-management/src/middlewares/auth.middleware.ts:27:13\n    at Generator.next (<anonymous>)\n    at /home/nakshatramanglik/Bus-Staff-management/src/middlewares/auth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/nakshatramanglik/Bus-Staff-management/src/middlewares/auth.middleware.ts:4:12)\n    at authenticate (/home/nakshatramanglik/Bus-Staff-management/src/middlewares/auth.middleware.ts:23:20)\n    at Layer.handle [as handle_request] (/home/nakshatramanglik/Bus-Staff-management/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/nakshatramanglik/Bus-Staff-management/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/nakshatramanglik/Bus-Staff-management/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/nakshatramanglik/Bus-Staff-management/node_modules/express/lib/router/layer.js:95:5)","statusCode":401,"timestamp":"2024-12-11T06:21:03.875Z"}
{"level":"error","message":"Error occurred: Invalid token","name":"CustomError","service":"ErrorMiddleware","stack":"CustomError: Invalid token\n    at /home/nakshatramanglik/Bus-Staff-management/src/middlewares/auth.middleware.ts:43:12\n    at Generator.next (<anonymous>)\n    at /home/nakshatramanglik/Bus-Staff-management/src/middlewares/auth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/nakshatramanglik/Bus-Staff-management/src/middlewares/auth.middleware.ts:4:12)\n    at authenticate (/home/nakshatramanglik/Bus-Staff-management/src/middlewares/auth.middleware.ts:23:20)\n    at Layer.handle [as handle_request] (/home/nakshatramanglik/Bus-Staff-management/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/nakshatramanglik/Bus-Staff-management/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/nakshatramanglik/Bus-Staff-management/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/nakshatramanglik/Bus-Staff-management/node_modules/express/lib/router/layer.js:95:5)","statusCode":401,"timestamp":"2024-12-11T06:22:20.952Z"}
{"level":"error","message":"Error occurred: User not authenticated","name":"CustomError","service":"ErrorMiddleware","stack":"CustomError: User not authenticated\n    at /home/nakshatramanglik/Bus-Staff-management/src/middlewares/role.middleware.ts:8:15\n    at Layer.handle [as handle_request] (/home/nakshatramanglik/Bus-Staff-management/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/nakshatramanglik/Bus-Staff-management/node_modules/express/lib/router/route.js:149:13)\n    at /home/nakshatramanglik/Bus-Staff-management/src/middlewares/auth.middleware.ts:43:5\n    at Generator.next (<anonymous>)\n    at /home/nakshatramanglik/Bus-Staff-management/src/middlewares/auth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/nakshatramanglik/Bus-Staff-management/src/middlewares/auth.middleware.ts:4:12)\n    at authenticate (/home/nakshatramanglik/Bus-Staff-management/src/middlewares/auth.middleware.ts:23:20)\n    at Layer.handle [as handle_request] (/home/nakshatramanglik/Bus-Staff-management/node_modules/express/lib/router/layer.js:95:5)","statusCode":401,"timestamp":"2024-12-11T06:24:55.436Z"}
{"level":"error","message":"Error occurred: User not authenticated","name":"CustomError","service":"ErrorMiddleware","stack":"CustomError: User not authenticated\n    at /home/nakshatramanglik/Bus-Staff-management/src/middlewares/role.middleware.ts:9:15\n    at Layer.handle [as handle_request] (/home/nakshatramanglik/Bus-Staff-management/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/nakshatramanglik/Bus-Staff-management/node_modules/express/lib/router/route.js:149:13)\n    at /home/nakshatramanglik/Bus-Staff-management/src/middlewares/auth.middleware.ts:43:5\n    at Generator.next (<anonymous>)\n    at /home/nakshatramanglik/Bus-Staff-management/src/middlewares/auth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/nakshatramanglik/Bus-Staff-management/src/middlewares/auth.middleware.ts:4:12)\n    at authenticate (/home/nakshatramanglik/Bus-Staff-management/src/middlewares/auth.middleware.ts:23:20)\n    at Layer.handle [as handle_request] (/home/nakshatramanglik/Bus-Staff-management/node_modules/express/lib/router/layer.js:95:5)","statusCode":401,"timestamp":"2024-12-11T06:25:43.353Z"}
{"level":"error","message":"Error creating staff: Validation error: ","name":"CustomError","service":"StaffService","stack":"CustomError: Validation error: \n    at /home/nakshatramanglik/Bus-Staff-management/src/validators/staff.validator.ts:33:13\n    at Generator.throw (<anonymous>)\n    at rejected (/home/nakshatramanglik/Bus-Staff-management/src/validators/staff.validator.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","statusCode":400,"timestamp":"2024-12-11T06:26:23.994Z"}
{"level":"error","message":"Error occurred: Validation error: ","name":"CustomError","service":"ErrorHandler","stack":"CustomError: Validation error: \n    at /home/nakshatramanglik/Bus-Staff-management/src/validators/staff.validator.ts:33:13\n    at Generator.throw (<anonymous>)\n    at rejected (/home/nakshatramanglik/Bus-Staff-management/src/validators/staff.validator.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","statusCode":400,"timestamp":"2024-12-11T06:26:23.999Z"}
{"level":"error","message":"Error creating staff: Validation error: ","name":"CustomError","service":"StaffService","stack":"CustomError: Validation error: \n    at /home/nakshatramanglik/Bus-Staff-management/src/validators/staff.validator.ts:33:13\n    at Generator.throw (<anonymous>)\n    at rejected (/home/nakshatramanglik/Bus-Staff-management/src/validators/staff.validator.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","statusCode":400,"timestamp":"2024-12-11T06:27:08.432Z"}
{"level":"error","message":"Error occurred: Validation error: ","name":"CustomError","service":"ErrorHandler","stack":"CustomError: Validation error: \n    at /home/nakshatramanglik/Bus-Staff-management/src/validators/staff.validator.ts:33:13\n    at Generator.throw (<anonymous>)\n    at rejected (/home/nakshatramanglik/Bus-Staff-management/src/validators/staff.validator.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","statusCode":400,"timestamp":"2024-12-11T06:27:08.434Z"}
{"level":"error","message":"Error creating staff: Validation error: ","name":"CustomError","service":"StaffService","stack":"CustomError: Validation error: \n    at /home/nakshatramanglik/Bus-Staff-management/src/validators/staff.validator.ts:33:13\n    at Generator.throw (<anonymous>)\n    at rejected (/home/nakshatramanglik/Bus-Staff-management/src/validators/staff.validator.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","statusCode":400,"timestamp":"2024-12-11T06:27:12.142Z"}
{"level":"error","message":"Error occurred: Validation error: ","name":"CustomError","service":"ErrorHandler","stack":"CustomError: Validation error: \n    at /home/nakshatramanglik/Bus-Staff-management/src/validators/staff.validator.ts:33:13\n    at Generator.throw (<anonymous>)\n    at rejected (/home/nakshatramanglik/Bus-Staff-management/src/validators/staff.validator.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","statusCode":400,"timestamp":"2024-12-11T06:27:12.142Z"}
{"level":"error","message":"Error creating staff: Validation error: ","name":"CustomError","service":"StaffService","stack":"CustomError: Validation error: \n    at /home/nakshatramanglik/Bus-Staff-management/src/validators/staff.validator.ts:33:13\n    at Generator.throw (<anonymous>)\n    at rejected (/home/nakshatramanglik/Bus-Staff-management/src/validators/staff.validator.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","statusCode":400,"timestamp":"2024-12-11T06:30:01.133Z"}
{"level":"error","message":"Error occurred: Validation error: ","name":"CustomError","service":"ErrorHandler","stack":"CustomError: Validation error: \n    at /home/nakshatramanglik/Bus-Staff-management/src/validators/staff.validator.ts:33:13\n    at Generator.throw (<anonymous>)\n    at rejected (/home/nakshatramanglik/Bus-Staff-management/src/validators/staff.validator.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","statusCode":400,"timestamp":"2024-12-11T06:30:01.134Z"}
{"level":"error","message":"Error creating staff: Validation error: ","name":"CustomError","service":"StaffService","stack":"CustomError: Validation error: \n    at /home/nakshatramanglik/Bus-Staff-management/src/validators/staff.validator.ts:33:13\n    at Generator.throw (<anonymous>)\n    at rejected (/home/nakshatramanglik/Bus-Staff-management/src/validators/staff.validator.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","statusCode":400,"timestamp":"2024-12-11T06:36:55.027Z"}
{"level":"error","message":"Error occurred: Validation error: ","name":"CustomError","service":"ErrorHandler","stack":"CustomError: Validation error: \n    at /home/nakshatramanglik/Bus-Staff-management/src/validators/staff.validator.ts:33:13\n    at Generator.throw (<anonymous>)\n    at rejected (/home/nakshatramanglik/Bus-Staff-management/src/validators/staff.validator.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","statusCode":400,"timestamp":"2024-12-11T06:36:55.028Z"}
{"level":"error","message":"Error creating staff: Validation error: ","name":"CustomError","service":"StaffService","stack":"CustomError: Validation error: \n    at /home/nakshatramanglik/Bus-Staff-management/src/validators/staff.validator.ts:33:13\n    at Generator.throw (<anonymous>)\n    at rejected (/home/nakshatramanglik/Bus-Staff-management/src/validators/staff.validator.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","statusCode":400,"timestamp":"2024-12-11T06:43:24.210Z"}
{"level":"error","message":"Error occurred: Validation error: ","name":"CustomError","service":"ErrorHandler","stack":"CustomError: Validation error: \n    at /home/nakshatramanglik/Bus-Staff-management/src/validators/staff.validator.ts:33:13\n    at Generator.throw (<anonymous>)\n    at rejected (/home/nakshatramanglik/Bus-Staff-management/src/validators/staff.validator.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","statusCode":400,"timestamp":"2024-12-11T06:43:24.212Z"}
{"classId":40,"code":406,"level":"error","message":"Failed to initialize EventPublisher: Operation failed: ExchangeDeclare; 406 (PRECONDITION-FAILED) with message \"PRECONDITION_FAILED - inequivalent arg 'type' for exchange 'bus_booking_events' in vhost '/': received 'topic' but current is 'direct'\"","methodId":10,"service":"EventPublisher","stack":"Error: Operation failed: ExchangeDeclare; 406 (PRECONDITION-FAILED) with message \"PRECONDITION_FAILED - inequivalent arg 'type' for exchange 'bus_booking_events' in vhost '/': received 'topic' but current is 'direct'\"\n    at reply (/home/nakshatramanglik/Bus-Staff-management/node_modules/amqplib/lib/channel.js:137:31)\n    at Channel.accept (/home/nakshatramanglik/Bus-Staff-management/node_modules/amqplib/lib/channel.js:315:9)\n    at Connection.mainAccept [as accept] (/home/nakshatramanglik/Bus-Staff-management/node_modules/amqplib/lib/connection.js:579:33)\n    at Socket.go (/home/nakshatramanglik/Bus-Staff-management/node_modules/amqplib/lib/connection.js:431:16)\n    at Socket.emit (node:events:517:28)\n    at emitReadable_ (node:internal/streams/readable:633:12)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)","timestamp":"2024-12-11T06:46:09.356Z"}
{"classId":40,"code":406,"level":"error","message":"Error creating staff: Operation failed: ExchangeDeclare; 406 (PRECONDITION-FAILED) with message \"PRECONDITION_FAILED - inequivalent arg 'type' for exchange 'bus_booking_events' in vhost '/': received 'topic' but current is 'direct'\"","methodId":10,"service":"StaffService","stack":"Error: Operation failed: ExchangeDeclare; 406 (PRECONDITION-FAILED) with message \"PRECONDITION_FAILED - inequivalent arg 'type' for exchange 'bus_booking_events' in vhost '/': received 'topic' but current is 'direct'\"\n    at reply (/home/nakshatramanglik/Bus-Staff-management/node_modules/amqplib/lib/channel.js:137:31)\n    at Channel.accept (/home/nakshatramanglik/Bus-Staff-management/node_modules/amqplib/lib/channel.js:315:9)\n    at Connection.mainAccept [as accept] (/home/nakshatramanglik/Bus-Staff-management/node_modules/amqplib/lib/connection.js:579:33)\n    at Socket.go (/home/nakshatramanglik/Bus-Staff-management/node_modules/amqplib/lib/connection.js:431:16)\n    at Socket.emit (node:events:517:28)\n    at emitReadable_ (node:internal/streams/readable:633:12)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)","timestamp":"2024-12-11T06:46:09.358Z"}
{"classId":40,"code":406,"level":"error","message":"Error occurred: Operation failed: ExchangeDeclare; 406 (PRECONDITION-FAILED) with message \"PRECONDITION_FAILED - inequivalent arg 'type' for exchange 'bus_booking_events' in vhost '/': received 'topic' but current is 'direct'\"","methodId":10,"service":"ErrorHandler","stack":"Error: Operation failed: ExchangeDeclare; 406 (PRECONDITION-FAILED) with message \"PRECONDITION_FAILED - inequivalent arg 'type' for exchange 'bus_booking_events' in vhost '/': received 'topic' but current is 'direct'\"\n    at reply (/home/nakshatramanglik/Bus-Staff-management/node_modules/amqplib/lib/channel.js:137:31)\n    at Channel.accept (/home/nakshatramanglik/Bus-Staff-management/node_modules/amqplib/lib/channel.js:315:9)\n    at Connection.mainAccept [as accept] (/home/nakshatramanglik/Bus-Staff-management/node_modules/amqplib/lib/connection.js:579:33)\n    at Socket.go (/home/nakshatramanglik/Bus-Staff-management/node_modules/amqplib/lib/connection.js:431:16)\n    at Socket.emit (node:events:517:28)\n    at emitReadable_ (node:internal/streams/readable:633:12)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)","timestamp":"2024-12-11T06:46:09.358Z"}
{"classId":40,"code":406,"level":"error","message":"Failed to publish event staff.created: Operation failed: ExchangeDeclare; 406 (PRECONDITION-FAILED) with message \"PRECONDITION_FAILED - inequivalent arg 'type' for exchange 'bus_booking_events' in vhost '/': received 'topic' but current is 'direct'\"","methodId":10,"service":"EventPublisher","stack":"Error: Operation failed: ExchangeDeclare; 406 (PRECONDITION-FAILED) with message \"PRECONDITION_FAILED - inequivalent arg 'type' for exchange 'bus_booking_events' in vhost '/': received 'topic' but current is 'direct'\"\n    at reply (/home/nakshatramanglik/Bus-Staff-management/node_modules/amqplib/lib/channel.js:137:31)\n    at Channel.accept (/home/nakshatramanglik/Bus-Staff-management/node_modules/amqplib/lib/channel.js:315:9)\n    at Connection.mainAccept [as accept] (/home/nakshatramanglik/Bus-Staff-management/node_modules/amqplib/lib/connection.js:579:33)\n    at Socket.go (/home/nakshatramanglik/Bus-Staff-management/node_modules/amqplib/lib/connection.js:431:16)\n    at Socket.emit (node:events:517:28)\n    at emitReadable_ (node:internal/streams/readable:633:12)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)","timestamp":"2024-12-11T06:46:09.358Z"}
{"level":"error","message":"Error creating staff: Staff with this email already exists","name":"CustomError","service":"StaffService","stack":"CustomError: Staff with this email already exists\n    at StaffService.<anonymous> (/home/nakshatramanglik/Bus-Staff-management/src/services/staff.service.ts:28:15)\n    at Generator.next (<anonymous>)\n    at fulfilled (/home/nakshatramanglik/Bus-Staff-management/src/services/staff.service.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","statusCode":409,"timestamp":"2024-12-11T07:13:53.610Z"}
{"level":"error","message":"Error occurred: Staff with this email already exists","name":"CustomError","service":"ErrorHandler","stack":"CustomError: Staff with this email already exists\n    at StaffService.<anonymous> (/home/nakshatramanglik/Bus-Staff-management/src/services/staff.service.ts:28:15)\n    at Generator.next (<anonymous>)\n    at fulfilled (/home/nakshatramanglik/Bus-Staff-management/src/services/staff.service.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","statusCode":409,"timestamp":"2024-12-11T07:13:53.612Z"}
{"level":"error","message":"Error creating staff: RabbitMQ channel not initialized","service":"StaffService","stack":"Error: RabbitMQ channel not initialized\n    at RabbitMQClient.<anonymous> (/home/nakshatramanglik/Bus-Staff-management/src/config/rabbitmq.ts:66:15)\n    at Generator.next (<anonymous>)\n    at /home/nakshatramanglik/Bus-Staff-management/src/config/rabbitmq.ts:8:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/nakshatramanglik/Bus-Staff-management/src/config/rabbitmq.ts:4:12)\n    at RabbitMQClient.publishEvent (/home/nakshatramanglik/Bus-Staff-management/src/config/rabbitmq.ts:70:16)\n    at /home/nakshatramanglik/Bus-Staff-management/src/config/rabbitmq.ts:109:18\n    at Generator.next (<anonymous>)\n    at /home/nakshatramanglik/Bus-Staff-management/src/config/rabbitmq.ts:8:71\n    at new Promise (<anonymous>)","timestamp":"2024-12-11T07:15:05.289Z"}
{"level":"error","message":"Error occurred: RabbitMQ channel not initialized","service":"ErrorHandler","stack":"Error: RabbitMQ channel not initialized\n    at RabbitMQClient.<anonymous> (/home/nakshatramanglik/Bus-Staff-management/src/config/rabbitmq.ts:66:15)\n    at Generator.next (<anonymous>)\n    at /home/nakshatramanglik/Bus-Staff-management/src/config/rabbitmq.ts:8:71\n    at new Promise (<anonymous>)\n    at __awaiter (/home/nakshatramanglik/Bus-Staff-management/src/config/rabbitmq.ts:4:12)\n    at RabbitMQClient.publishEvent (/home/nakshatramanglik/Bus-Staff-management/src/config/rabbitmq.ts:70:16)\n    at /home/nakshatramanglik/Bus-Staff-management/src/config/rabbitmq.ts:109:18\n    at Generator.next (<anonymous>)\n    at /home/nakshatramanglik/Bus-Staff-management/src/config/rabbitmq.ts:8:71\n    at new Promise (<anonymous>)","timestamp":"2024-12-11T07:15:05.289Z"}
{"level":"info","message":"Staff created successfully: 67593c73b1941725fa2af328","service":"StaffService","timestamp":"2024-12-11T07:17:07.809Z"}
{"level":"error","message":"Error logging in as staff conductor3@conductor3.com: Staff not found","name":"CustomError","service":"StaffService","stack":"CustomError: Staff not found\n    at StaffService.<anonymous> (/home/nakshatramanglik/Bus-Staff-management/src/services/staff.service.ts:31:15)\n    at Generator.next (<anonymous>)\n    at fulfilled (/home/nakshatramanglik/Bus-Staff-management/src/services/staff.service.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","statusCode":404,"timestamp":"2024-12-11T19:22:12.806Z"}
{"level":"error","message":"Error occurred: Staff not found","name":"CustomError","service":"ErrorHandler","stack":"CustomError: Staff not found\n    at StaffService.<anonymous> (/home/nakshatramanglik/Bus-Staff-management/src/services/staff.service.ts:31:15)\n    at Generator.next (<anonymous>)\n    at fulfilled (/home/nakshatramanglik/Bus-Staff-management/src/services/staff.service.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","statusCode":404,"timestamp":"2024-12-11T19:22:12.807Z"}
